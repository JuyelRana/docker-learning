{"ast":null,"code":"import _toConsumableArray from\"/home/juyel/Desktop/docker/docker-learning/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/home/juyel/Desktop/docker/docker-learning/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/juyel/Desktop/docker/docker-learning/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/juyel/Desktop/docker/docker-learning/frontend/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useEffect}from'react';import GoalInput from'./components/goals/GoalInput';import CourseGoals from'./components/goals/CourseGoals';import ErrorAlert from'./components/UI/ErrorAlert';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),loadedGoals=_useState2[0],setLoadedGoals=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];useEffect(function(){function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,resData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsLoading(true);_context.prev=1;_context.next=4;return fetch('http://goals-backend/goals');case 4:response=_context.sent;_context.next=7;return response.json();case 7:resData=_context.sent;if(response.ok){_context.next=10;break;}throw new Error(resData.message||'Fetching the goals failed.');case 10:setLoadedGoals(resData.goals);_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](1);setError(_context.t0.message||'Fetching goals failed - the server responsed with an error.');case 16:setIsLoading(false);case 17:case\"end\":return _context.stop();}}},_callee,null,[[1,13]]);}));return _fetchData.apply(this,arguments);}fetchData();},[]);function addGoalHandler(_x){return _addGoalHandler.apply(this,arguments);}function _addGoalHandler(){_addGoalHandler=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(goalText){var response,resData;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setIsLoading(true);_context2.prev=1;_context2.next=4;return fetch('http://goals-backend/goals',{method:'POST',body:JSON.stringify({text:goalText}),headers:{'Content-Type':'application/json'}});case 4:response=_context2.sent;_context2.next=7;return response.json();case 7:resData=_context2.sent;if(response.ok){_context2.next=10;break;}throw new Error(resData.message||'Adding the goal failed.');case 10:setLoadedGoals(function(prevGoals){var updatedGoals=[{id:resData.goal.id,text:goalText}].concat(_toConsumableArray(prevGoals));return updatedGoals;});_context2.next=16;break;case 13:_context2.prev=13;_context2.t0=_context2[\"catch\"](1);setError(_context2.t0.message||'Adding a goal failed - the server responsed with an error.');case 16:setIsLoading(false);case 17:case\"end\":return _context2.stop();}}},_callee2,null,[[1,13]]);}));return _addGoalHandler.apply(this,arguments);}function deleteGoalHandler(_x2){return _deleteGoalHandler.apply(this,arguments);}function _deleteGoalHandler(){_deleteGoalHandler=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(goalId){var response,resData;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setIsLoading(true);_context3.prev=1;_context3.next=4;return fetch('http://goals-backend/goals/'+goalId,{method:'DELETE'});case 4:response=_context3.sent;_context3.next=7;return response.json();case 7:resData=_context3.sent;if(response.ok){_context3.next=10;break;}throw new Error(resData.message||'Deleting the goal failed.');case 10:setLoadedGoals(function(prevGoals){var updatedGoals=prevGoals.filter(function(goal){return goal.id!==goalId;});return updatedGoals;});_context3.next=16;break;case 13:_context3.prev=13;_context3.t0=_context3[\"catch\"](1);setError(_context3.t0.message||'Deleting the goal failed - the server responsed with an error.');case 16:setIsLoading(false);case 17:case\"end\":return _context3.stop();}}},_callee3,null,[[1,13]]);}));return _deleteGoalHandler.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{children:[error&&/*#__PURE__*/_jsx(ErrorAlert,{errorText:error}),/*#__PURE__*/_jsx(GoalInput,{onAddGoal:addGoalHandler}),!isLoading&&/*#__PURE__*/_jsx(CourseGoals,{goals:loadedGoals,onDeleteGoal:deleteGoalHandler})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","GoalInput","CourseGoals","ErrorAlert","App","loadedGoals","setLoadedGoals","isLoading","setIsLoading","error","setError","fetchData","fetch","response","json","resData","ok","Error","message","goals","addGoalHandler","goalText","method","body","JSON","stringify","text","headers","prevGoals","updatedGoals","id","goal","deleteGoalHandler","goalId","filter"],"sources":["/home/juyel/Desktop/docker/docker-learning/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n\nimport GoalInput from './components/goals/GoalInput';\nimport CourseGoals from './components/goals/CourseGoals';\nimport ErrorAlert from './components/UI/ErrorAlert';\n\nfunction App() {\n  const [loadedGoals, setLoadedGoals] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  useEffect(function () {\n    async function fetchData() {\n      setIsLoading(true);\n\n      try {\n        const response = await fetch('http://goals-backend/goals');\n\n        const resData = await response.json();\n\n        if (!response.ok) {\n          throw new Error(resData.message || 'Fetching the goals failed.');\n        }\n\n        setLoadedGoals(resData.goals);\n      } catch (err) {\n        setError(\n          err.message ||\n            'Fetching goals failed - the server responsed with an error.'\n        );\n      }\n      setIsLoading(false);\n    }\n\n    fetchData();\n  }, []);\n\n  async function addGoalHandler(goalText) {\n    setIsLoading(true);\n\n    try {\n      const response = await fetch('http://goals-backend/goals', {\n        method: 'POST',\n        body: JSON.stringify({\n          text: goalText,\n        }),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n\n      const resData = await response.json();\n\n      if (!response.ok) {\n        throw new Error(resData.message || 'Adding the goal failed.');\n      }\n\n      setLoadedGoals((prevGoals) => {\n        const updatedGoals = [\n          {\n            id: resData.goal.id,\n            text: goalText,\n          },\n          ...prevGoals,\n        ];\n        return updatedGoals;\n      });\n    } catch (err) {\n      setError(\n        err.message ||\n          'Adding a goal failed - the server responsed with an error.'\n      );\n    }\n    setIsLoading(false);\n  }\n\n  async function deleteGoalHandler(goalId) {\n    setIsLoading(true);\n\n    try {\n      const response = await fetch('http://goals-backend/goals/' + goalId, {\n        method: 'DELETE',\n      });\n\n      const resData = await response.json();\n\n      if (!response.ok) {\n        throw new Error(resData.message || 'Deleting the goal failed.');\n      }\n\n      setLoadedGoals((prevGoals) => {\n        const updatedGoals = prevGoals.filter((goal) => goal.id !== goalId);\n        return updatedGoals;\n      });\n    } catch (err) {\n      setError(\n        err.message ||\n          'Deleting the goal failed - the server responsed with an error.'\n      );\n    }\n    setIsLoading(false);\n  }\n\n  return (\n    <div>\n      {error && <ErrorAlert errorText={error} />}\n      <GoalInput onAddGoal={addGoalHandler} />\n      {!isLoading && (\n        <CourseGoals goals={loadedGoals} onDeleteGoal={deleteGoalHandler} />\n      )}\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"+iBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CAEA,MAAOC,CAAAA,SAAP,KAAsB,8BAAtB,CACA,MAAOC,CAAAA,WAAP,KAAwB,gCAAxB,CACA,MAAOC,CAAAA,UAAP,KAAuB,4BAAvB,C,wFAEA,QAASC,CAAAA,GAAT,EAAe,CACb,cAAsCL,QAAQ,CAAC,EAAD,CAA9C,wCAAOM,WAAP,eAAoBC,cAApB,eACA,eAAkCP,QAAQ,CAAC,KAAD,CAA1C,yCAAOQ,SAAP,eAAkBC,YAAlB,eACA,eAA0BT,QAAQ,CAAC,IAAD,CAAlC,yCAAOU,KAAP,eAAcC,QAAd,eAEAV,SAAS,CAAC,UAAY,SACLW,CAAAA,SADK,qIACpB,wJACEH,YAAY,CAAC,IAAD,CAAZ,CADF,sCAI2BI,CAAAA,KAAK,CAAC,4BAAD,CAJhC,QAIUC,QAJV,qCAM0BA,CAAAA,QAAQ,CAACC,IAAT,EAN1B,QAMUC,OANV,kBAQSF,QAAQ,CAACG,EARlB,+BASY,IAAIC,CAAAA,KAAJ,CAAUF,OAAO,CAACG,OAAR,EAAmB,4BAA7B,CATZ,SAYIZ,cAAc,CAACS,OAAO,CAACI,KAAT,CAAd,CAZJ,iFAcIT,QAAQ,CACN,YAAIQ,OAAJ,EACE,6DAFI,CAAR,CAdJ,QAmBEV,YAAY,CAAC,KAAD,CAAZ,CAnBF,qEADoB,4CAuBpBG,SAAS,GACV,CAxBQ,CAwBN,EAxBM,CAAT,CALa,QA+BES,CAAAA,cA/BF,sJA+Bb,kBAA8BC,QAA9B,2IACEb,YAAY,CAAC,IAAD,CAAZ,CADF,wCAI2BI,CAAAA,KAAK,CAAC,4BAAD,CAA+B,CACzDU,MAAM,CAAE,MADiD,CAEzDC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACnBC,IAAI,CAAEL,QADa,CAAf,CAFmD,CAKzDM,OAAO,CAAE,CACP,eAAgB,kBADT,CALgD,CAA/B,CAJhC,QAIUd,QAJV,uCAc0BA,CAAAA,QAAQ,CAACC,IAAT,EAd1B,QAcUC,OAdV,mBAgBSF,QAAQ,CAACG,EAhBlB,gCAiBY,IAAIC,CAAAA,KAAJ,CAAUF,OAAO,CAACG,OAAR,EAAmB,yBAA7B,CAjBZ,SAoBIZ,cAAc,CAAC,SAACsB,SAAD,CAAe,CAC5B,GAAMC,CAAAA,YAAY,EAChB,CACEC,EAAE,CAAEf,OAAO,CAACgB,IAAR,CAAaD,EADnB,CAEEJ,IAAI,CAAEL,QAFR,CADgB,4BAKbO,SALa,EAAlB,CAOA,MAAOC,CAAAA,YAAP,CACD,CATa,CAAd,CApBJ,qFA+BInB,QAAQ,CACN,aAAIQ,OAAJ,EACE,4DAFI,CAAR,CA/BJ,QAoCEV,YAAY,CAAC,KAAD,CAAZ,CApCF,uEA/Ba,yDAsEEwB,CAAAA,iBAtEF,gKAsEb,kBAAiCC,MAAjC,2IACEzB,YAAY,CAAC,IAAD,CAAZ,CADF,wCAI2BI,CAAAA,KAAK,CAAC,8BAAgCqB,MAAjC,CAAyC,CACnEX,MAAM,CAAE,QAD2D,CAAzC,CAJhC,QAIUT,QAJV,uCAQ0BA,CAAAA,QAAQ,CAACC,IAAT,EAR1B,QAQUC,OARV,mBAUSF,QAAQ,CAACG,EAVlB,gCAWY,IAAIC,CAAAA,KAAJ,CAAUF,OAAO,CAACG,OAAR,EAAmB,2BAA7B,CAXZ,SAcIZ,cAAc,CAAC,SAACsB,SAAD,CAAe,CAC5B,GAAMC,CAAAA,YAAY,CAAGD,SAAS,CAACM,MAAV,CAAiB,SAACH,IAAD,QAAUA,CAAAA,IAAI,CAACD,EAAL,GAAYG,MAAtB,EAAjB,CAArB,CACA,MAAOJ,CAAAA,YAAP,CACD,CAHa,CAAd,CAdJ,qFAmBInB,QAAQ,CACN,aAAIQ,OAAJ,EACE,gEAFI,CAAR,CAnBJ,QAwBEV,YAAY,CAAC,KAAD,CAAZ,CAxBF,uEAtEa,oDAiGb,mBACE,uBACGC,KAAK,eAAI,KAAC,UAAD,EAAY,SAAS,CAAEA,KAAvB,EADZ,cAEE,KAAC,SAAD,EAAW,SAAS,CAAEW,cAAtB,EAFF,CAGG,CAACb,SAAD,eACC,KAAC,WAAD,EAAa,KAAK,CAAEF,WAApB,CAAiC,YAAY,CAAE2B,iBAA/C,EAJJ,GADF,CASD,CAED,cAAe5B,CAAAA,GAAf"},"metadata":{},"sourceType":"module"}